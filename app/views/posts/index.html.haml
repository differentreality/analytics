.row
  .col-md-12
    .page-header
      %h1.text-center
        Posts
      .text-center
        Total
        .badge
          = @posts.count
        - Post.kinds.keys.each do |kind|
          = kind
          %div{ class: "badge #{@posts.send(kind).count > 0 ? 'badge badge-success' : 'badge'}" }
            = @posts.send(kind).count
.row
  .col-xs-12.col-md-12
    %div{ role: 'tabpanel' }
      #tabs.nav-center
        %ul.text-center.nav.nav-tabs{ role: 'tablist' }
          %li.active{ role: 'presentation' }
            %a{ href: '#trending', 'aria-controls': 'trending', 'data-toggle': 'tab', role: 'tab' }
              Trending
          %li{ role: 'presentation' }
            %a{ href: '#list', 'aria-controls': 'list', 'data-toggle': 'tab', role: 'tab' }
              All
      .tab-content
        .tab-pane.active#trending{ role: 'tabpanel'}
          .row
            .col-xs-12.col-md-12
              %div{ role: 'tabpanel' }
                = render partial: 'trending'

        .tab-pane#list{ role: 'tabpanel'}
          .row
            .col-md-12
              %table.table.table-hover.table-bordered.table-striped.datatable#posts
                %thead
                  %th Reactions
                  %th Title
                  %th Kind
                  %th ID (Facebook)
                  %th Actions

                %tbody
                  - @posts.each do |post|
                    %tr
                      %td{ 'data-order' => post.reactions.count }
                        = post.reactions.count
                        Total Reactions
                        %br
                        %br
                        -  post.reactions.group(:name).count.each do |reaction, count|
                          %i{ class: "fas #{icon_for(reaction)}" }
                          = count
                          = reaction

                      %td.col-md-6= truncate(post.message, length: 200) || post.story
                      %td= post.kind.capitalize
                      %td= post.object_id
                      %td
                        = link_to 'Show', post_path(post), class: 'btn btn-success'
                        = link_to 'Destroy', post_path(post), method: :delete, class: 'btn btn-danger', confirm: "Are you sure you want to delete the post #{post.message}?"
